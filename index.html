<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style>
		table{
			margin:150px auto;
			width: 800px;
			border-collapse:collapse;
		}

		table,th, td{
			border: 1px solid black;
		}
	</style>
</head>
<body>
<div id="test"></div>
<script type="module">
	import MVVM from './src/mvvm.js'
	new MVVM({
		el: '#test',
		data: {
			head:['位置', '姓名', '绰号', '连招', '操作'],
			usersFiels: ['position', 'name', 'nikename', 'combo'],
			users: [{
				position: '上单',
				name: '墨菲特',
				nikename: '石头人',
				combo: 'QQQR'
			}, {
				position: '打野',
				name: '盲僧',
				nikename: '小学僧',
				combo: 'WEQRQ'
			},{
				position: '中单',
				name: '亚索',
				nikename: '托儿索',
				combo: 'EEEE'
			},{
				position: 'ADC',
				name: 'EZ',
				nikename: '小黄毛',
				combo: 'QQQQ'
			},{
				position: '辅助',
				name: '悠米',
				nikename: '小猫咪',
				combo: 'EEEE'
			}],
			a:{}
		},
		create(){

		},
		methods: {
			del(position){
				this.users = this.users.filter((user)=>{
					return user.position !=position;
				});
			},
			edit(index){
				this.users[index].isEditing = true;
			},
			change(index, id, type, event){
				let value = event.target.value;
				this.users[index][type] = value;
				this.users[index].isEditing = false;
			}
		},
		template: `<table>
				<thead>
					<tr>
						<th class="head" mvvm:for="(index, value) of head">{{value}}</th>
					</tr>
				</thead>
				<tbody>
					<tr mvvm:for="(index, item) of users">
						<td mvvm:for="(i, field) of usersFiels" ><span mvvm:if="!item.isEditing || field == 'id' " >{{item[field] || ''}}</span><input :value="item[field] || ''" @blur="change(index, item.id, field, $event)" mvvm:else/></td>
						<td ><span @click="edit(index)" >编辑</span> / <span @click="del(item.position)" >删除</span></td>
					</tr>
				</tbody>
			</table>`
	});
</script>
</body>
</html>